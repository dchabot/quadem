# Database for APS quad electrometer
#   Mark Rivers
#   February 24, 2003
#   July 8, 2004 Changes for asyn version

record(bo,"$(P)$(EM)Reboot") {
    field(DESC,"Reboot electrometer")
    field(DTYP, "asynInt32")
    field(OUT,"@asyn($(PORT) 0)REBOOT")
}

record(mbbo,"$(P)$(EM)Gain") {
    field(DESC,"Gain")
    field(ZRVL,"0")
    field(ZRST,"External")
    field(ONVL,"7")
    field(ONST,"2.51")
    field(TWVL,"6")
    field(TWST,"2.93")
    field(THVL,"5")
    field(THST,"3.52")
    field(FRVL,"4")
    field(FRST,"4.40")
    field(FVVL,"3")
    field(FVST,"5.87")
    field(SXVL,"2")
    field(SXST,"8.80")
    field(SVVL,"1")
    field(SVST,"17.6")
    field(DTYP, "asynInt32")
    field(OUT,"@asyn($(PORT) 0)GAIN")
}

record(mbbo,"$(P)$(EM)PingPong1") {
    field(DESC,"PingPong")
    field(PINI,"YES")
    field(ZRVL,"0")
    field(ZRST,"#1")
    field(ONVL,"1")
    field(ONST,"#2")
    field(TWVL,"2")
    field(TWST,"Avg.")
    field(DTYP, "asynInt32")
    field(OUT,"@asyn($(PORT) 0)PING_PONG")
}

record(mbbo,"$(P)$(EM)PingPong2") {
    field(DESC,"PingPong")
    field(PINI,"YES")
    field(ZRVL,"0")
    field(ZRST,"#1")
    field(ONVL,"1")
    field(ONST,"#2")
    field(TWVL,"2")
    field(TWST,"Avg.")
    field(DTYP, "asynInt32")
    field(OUT,"@asyn($(PORT) 1)PING_PONG")
}

record(mbbo,"$(P)$(EM)PingPong3") {
    field(DESC,"PingPong")
    field(PINI,"YES")
    field(ZRVL,"0")
    field(ZRST,"#1")
    field(ONVL,"1")
    field(ONST,"#2")
    field(TWVL,"2")
    field(TWST,"Avg.")
    field(DTYP, "asynInt32")
    field(OUT,"@asyn($(PORT) 2)PING_PONG")
}

record(mbbo,"$(P)$(EM)PingPong4") {
    field(DESC,"PingPong")
    field(PINI,"YES")
    field(ZRVL,"0")
    field(ZRST,"#1")
    field(ONVL,"1")
    field(ONST,"#2")
    field(TWVL,"2")
    field(TWST,"Avg.")
    field(DTYP, "asynInt32")
    field(OUT,"@asyn($(PORT) 3)PING_PONG")
}

record(ao,"$(P)$(EM)ConversionTime") {
    field(DESC,"Conversion Time (sec)")
    field(DRVL,"615.e-6")
    field(LOPR,"615.e-6")
    field(DRVH,"13.1078e-3")
    field(HOPR,"13.1078e-3")
    field(PREC,"5")
    field(VAL,"615.e-6")
    field(DTYP, "asynFloat64")
    field(OUT,"@asyn($(PORT) 0)SCAN_PERIOD")
}

record(ao,"$(P)$(EM)Period") {
    field(DESC,"Period")
    field(PREC,"0")
    field(VAL,"-1")
    field(DTYP, "asynInt32")
    field(OUT,"@asyn($(PORT) 0)PERIOD")
}

record(ao,"$(P)$(EM)Pulse") {
    field(DESC,"Pulse")
    field(PREC,"0")
    field(VAL,"1024")
    field(DTYP, "asynInt32")
    field(OUT,"@asyn($(PORT) 0)PULSE")
}

record(ao,"$(P)$(EM)Go") {
    field(DESC,"Go")
    field(PREC,"0")
    field(VAL,"0")
    field(DTYP, "asynInt32")
    field(OUT,"@asyn($(PORT) 0)GO")
}

record(seq,"$(P)$(EM)Initialize") {
    field(PINI,"YES")
    field(DESC,"Initialize")
    field(LNK1,"$(P)$(EM)Reboot.PROC PP MS")
    # Must wait for a little time after reboot
    field(DLY2,"1.0")
    field(LNK2,"$(P)$(EM)Gain.PROC PP MS")
    field(DLY3,"0.01")
    field(LNK3,"$(P)$(EM)Pulse.PROC PP MS")
    field(DLY4,"0.01")
    field(LNK4,"$(P)$(EM)Period.PROC PP MS")
    field(DLY5,"0.01")
    field(LNK5,"$(P)$(EM)ConversionTime.PROC PP MS")
    field(DLY6,"0.01")
    field(LNK6,"$(P)$(EM)Go.PROC PP MS")
}

record(ao,"$(P)$(EM)Offset1") {
    field(DESC,"Offset")
    field(PINI,"YES")
    field(DRVL,"-65535")
    field(LOPR,"-65535")
    field(DRVH,"65535")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32")
    field(OUT,"@asyn($(PORT) 0)OFFSET")
}

record(ao,"$(P)$(EM)Offset2") {
    field(DESC,"Offset")
    field(PINI,"YES")
    field(DRVL,"-65535")
    field(LOPR,"-65535")
    field(DRVH,"65535")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32")
    field(OUT,"@asyn($(PORT) 1)OFFSET")
}

record(ao,"$(P)$(EM)Offset3") {
    field(DESC,"Offset")
    field(PINI,"YES")
    field(DRVL,"-65535")
    field(LOPR,"-65535")
    field(DRVH,"65535")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32")
    field(OUT,"@asyn($(PORT) 2)OFFSET")
}

record(ao,"$(P)$(EM)Offset4") {
    field(DESC,"Offset")
    field(PINI,"YES")
    field(DRVL,"-65535")
    field(LOPR,"-65535")
    field(DRVH,"65535")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32")
    field(OUT,"@asyn($(PORT) 3)OFFSET")
}

record(ai,"$(P)$(EM)Read") {
    field(DESC,"Read all inputs")
    field(PINI,"NO")
    field(SCAN,"1 second")
    field(FLNK,"$(P)$(EM)Current1")
}

record(ai,"$(P)$(EM)Current1") {
    field(DESC,"Diode 1 current")
    field(PINI,"NO")
    field(LOPR,"0")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32Average")
    field(INP,"@asyn($(PORT) 0)DATA")
    field(FLNK,"$(P)$(EM)Current2")
}

record(ai,"$(P)$(EM)Current2") {
    field(DESC,"Diode 2 current")
    field(PINI,"NO")
    field(LOPR,"0")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32Average")
    field(INP,"@asyn($(PORT) 1)DATA")
    field(FLNK,"$(P)$(EM)Current3")
}

record(ai,"$(P)$(EM)Current3") {
    field(DESC,"Diode 3 current")
    field(PINI,"NO")
    field(LOPR,"0")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32Average")
    field(INP,"@asyn($(PORT) 2)DATA")
    field(FLNK,"$(P)$(EM)Current4")
}

record(ai,"$(P)$(EM)Current4") {
    field(DESC,"Diode 4 current")
    field(PINI,"NO")
    field(LOPR,"0")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32Average")
    field(INP,"@asyn($(PORT) 3)DATA")
    field(FLNK,"$(P)$(EM)Sum1")
}

record(ai,"$(P)$(EM)Sum1") {
    field(DESC,"Diode pair 1 sum")
    field(PINI,"NO")
    field(LOPR,"0")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32Average")
    field(INP,"@asyn($(PORT) 4)DATA")
    field(FLNK,"$(P)$(EM)Sum2")
}

record(ai,"$(P)$(EM)Sum2") {
    field(DESC,"Diode pair 2 sum")
    field(PINI,"NO")
    field(LOPR,"0")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32Average")
    field(INP,"@asyn($(PORT) 5)DATA")
    field(FLNK,"$(P)$(EM)Diff1")
}

record(ai,"$(P)$(EM)Diff1") {
    field(DESC,"Diode pair 1 diff")
    field(PINI,"NO")
    field(LOPR,"0")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32Average")
    field(INP,"@asyn($(PORT) 6)DATA")
    field(FLNK,"$(P)$(EM)Diff2")
}

record(ai,"$(P)$(EM)Diff2") {
    field(DESC,"Diode pair 2 diff")
    field(PINI,"NO")
    field(LOPR,"0")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32Average")
    field(INP,"@asyn($(PORT) 7)DATA")
    field(FLNK,"$(P)$(EM)Position1")
}

record(ai,"$(P)$(EM)Position1") {
    field(DESC,"Diode pair 1 position")
    field(PINI,"NO")
    field(LOPR,"0")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32Average")
    field(INP,"@asyn($(PORT) 8)DATA")
    field(FLNK,"$(P)$(EM)Position2")
}

record(ai,"$(P)$(EM)Position2") {
    field(DESC,"Diode pair 2 position")
    field(PINI,"NO")
    field(LOPR,"0")
    field(HOPR,"65535")
    field(PREC,"0")
    field(DTYP, "asynInt32Average")
    field(INP,"@asyn($(PORT) 9)DATA")
}

